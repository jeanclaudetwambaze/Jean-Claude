<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RwaToday</title>

<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html,body { height: 100%; font-family: Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f2f4f7; color:#111;}
  a { color:inherit; text-decoration:none; }
  .topbar { background:lab(45.06% 68.46 53.56); color:#fff; padding:8px 16px; display:flex; justify-content:space-between; align-items:center; font-size:14px; }
  .topbar .left a { margin-right:12px; color:#ddd; }
  .topbar .right a { margin-left:12px; color:#ddd; }
  header.site-header { background:#fff; padding:18px 16px; display:flex; align-items:center; justify-content:space-between; gap:16px; border-bottom:1px solid #e6e9ee; position:sticky; top:0; z-index:50; }
  .brand { display:flex; align-items:center; gap:12px; }
  .logo { font-weight:800; font-size:28px; color:#d40000; letter-spacing:1px; }
  .search { display:flex; gap:8px; align-items:center; }
  .search input { padding:8px 12px; border:1px solid #ddd; border-radius:6px; min-width:200px; }
  .controls { display:flex; gap:8px; align-items:center; }
  .btn { background:#d40000; color:#fff; padding:8px 12px; border-radius:6px; border:none; cursor:pointer; font-weight:600; }
  .btn.secondary { background:transparent; color:#222; border:1px solid #ddd; }
  nav.categories { display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
  nav.categories a { padding:10px 14px; border-radius:6px; color:#333; font-weight:600; }
  nav.categories a.active { background:#d40000; color:white; }
  .container { max-width:1150px; margin:18px auto; padding:0 16px; display:grid; grid-template-columns: 1fr 320px; gap:18px; align-items:start; }
  .main { }
  .sidebar { }
  .hero { display:flex; gap:14px; background:#fff; padding:14px; border-radius:8px; margin-bottom:16px; box-shadow:0 6px 18px rgba(16,24,40,0.04); }
  .hero .hero-img { flex:1 1 60%; height:260px; border-radius:8px; overflow:hidden; }
  .hero img { width:100%; height:100%; object-fit:cover; display:block; }
  .hero .hero-info { flex:1 1 40%; display:flex; flex-direction:column; gap:10px; }
  .hero h1 { font-size:20px; }
  .hero p { color:#444; line-height:1.4; }
  .section-title { margin:8px 0 12px 0; font-size:18px; font-weight:700; color:#222; display:flex; justify-content:space-between; align-items:center; }
  .cards { display:grid; grid-template-columns: repeat(3, 1fr); gap:14px; }
  .card { background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 6px 18px rgba(16,24,40,0.04); display:flex; flex-direction:column; }
  .card img { width:100%; height:160px; object-fit:cover; display:block; }
  .card .card-body { padding:12px; flex:1; display:flex; flex-direction:column; gap:8px; }
  .card .meta { font-size:12px; color:#777; font-weight:600; }
  .card h3 { font-size:16px; line-height:1.25; }
  .card p { color:#444; font-size:13px; flex:1; }
  .small { font-size:13px; color:#666; }
  @media (max-width:1000px) {
    .cards { grid-template-columns: repeat(2,1fr); }
    .container { grid-template-columns: 1fr 300px; }
    .hero { flex-direction:column; }
    .hero .hero-img { height:220px; }
  }
  @media (max-width:720px) {
    header.site-header { flex-direction:column; align-items:flex-start; gap:10px; }
    .container { grid-template-columns:1fr; padding-bottom:60px; }
    .sidebar { order:2; }
    .main { order:1; }
    .cards { grid-template-columns:1fr; }
    .hero .hero-img { height:180px; }
    nav.categories { overflow:auto; -webkit-overflow-scrolling:touch; }
  }
  .muted { color:#666; font-size:13px; }
  .flex { display:flex; gap:10px; align-items:center; }
  .gap { height:12px; }
  .empty { padding:30px; text-align:center; color:#666; background:#fff; border-radius:8px; }
  .tag { font-size:12px; color:#d40000; font-weight:700; }
  .card-controls { display:flex; gap:6px; justify-content:flex-end; }
  .icon-btn { background:transparent; border:1px solid #eee; padding:6px 8px; border-radius:6px; cursor:pointer; font-weight:600; font-size:13px; }
</style>
</head>
<body>
  <div class="topbar">
    <div class="left">
      <a href="#" onclick="changeLang('kin')">Kinyarwanda</a>
      <a href="#" onclick="changeLang('en')">English</a>
      <a href="#" onclick="changeLang('sw')">Swahili</a>
      <a href="#" onclick="changeLang('fr')">Français</a>
    </div>
    <div class="right">
      <a href="#">Facebook Page</a>
      <a href="#">YouTube Channel</a>
      <a href="#">Whatassp Group</a>
     <a href="Admin.html">ADMIN PAGE</a>
    </div>
  </div>

  <!-- header -->
  <header class="site-header">
    <div class="brand">
      <div class="logo">RwaToday</div>
     
    </div>

    <div class="search">
      <input id="searchInput" placeholder="Shakisha inkuru... (search)"/>
      <button class="btn secondary" onclick="doSearch()">Search</button>
    </div>

    <!-- categories -->
    <nav class="categories" style="width:100%; margin-top:10px;">
      <a href="#" id="nav-ahabanza" class="active" data-cat="ahabanza">Ahabanza</a>
      <a href="#" id="nav-amakuru" data-cat="amakuru">Amakuru</a>
      <a href="#" id="nav-politiki" data-cat="politiki">Politiki</a>
      <a href="#" id="nav-ubukungu" data-cat="ubukungu">Ubukungu</a>
      <a href="#" id="nav-ubuzima" data-cat="ubuzima">Ubuzima</a>
      <a href="#" id="nav-imikino" data-cat="imikino">Imikino</a>
     <a href="#" id="nav-imikino" data-cat="imikino">Inyamaswa</a>
     <a href="#" id="nav-imikino" data-cat="imikino">Ibimera</a>
    </nav>
  </header>

  <!-- main container -->
  <div class="container">
    <main class="main">

      <!-- hero -->
      <div class="hero" id="hero">
        <div class="hero-img" id="heroImage">
          <img src="data:image/svg+xml;charset=UTF-8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><rect width='100%' height='100%' fill='%23ddd'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%23777' font-size='28'>No hero image yet</text></svg>" alt="">
        </div>
        <div class="hero-info">
          <h1 id="heroTitle">Welcome to RwaToDay — your news hub</h1>
          <p id="heroSummary">This is a demo news layout. Click categories above to filter news.</p>
          <div class="muted small">Latest • Automated demo</div>
        </div>
      </div>

      <!-- section -->
      <div>
        <div class="section-title">
          <div><span class="tag" id="activeCategoryLabel">Ahabanza</span> · <span class="muted" id="categoryCount">0 Inkuru</span></div>
        </div>

        <div id="cardsContainer" class="cards">
          <!-- cards produced by JS -->
        </div>

        <div id="emptyPlaceholder" class="empty" style="display:none;">No posts in this category.</div>
      </div>
    </main>

    <!-- sidebar -->
    <aside class="sidebar">
      <div class="widget">
        <h4>Iyandikishe (Subscribe)</h4>
        <p class="muted">200 FRW / DAY · 1200 RW / WEEK · 4500 RW / MONTH</p>
      </div>

      <div class="widget">
        <h4>Inkuru za vuba (Recent)</h4>
        <div id="recentList" class="small-list"></div>
      </div>

      <div class="widget">
        <h4>Top Imikino</h4>
        <div class="small-list" id="topSports"></div>
      </div>
    </aside>
  </div>

<script>
const LS_KEY = "amukuru_posts_v1";

function readPosts() {
  try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
  catch(e){ return []; }
}

function writePosts(posts) {
  localStorage.setItem(LS_KEY, JSON.stringify(posts));
}

function uid() {
  return Math.random().toString(36).slice(2,10) + Date.now().toString(36).slice(-4);
}

function timeAgo(ts) {
  const sec = Math.floor((Date.now() - ts)/1000);
  if (sec < 60) return sec + "s";
  if (sec < 3600) return Math.floor(sec/60) + "m";
  if (sec < 86400) return Math.floor(sec/3600) + "h";
  return Math.floor(sec/86400) + "d";
}

let activeCategory = 'ahabanza';
function setActiveCategory(cat) {
  activeCategory = cat;
  document.querySelectorAll('nav.categories a').forEach(a => {
    a.classList.toggle('active', a.dataset.cat === cat);
  });
  document.getElementById('activeCategoryLabel').textContent = capitalize(cat);
  renderAll();
}

function capitalize(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

function renderAll() {
  renderHero();
  renderCards();
  renderRecent();
  renderTopSports();
}

function renderHero() {
  const posts = readPosts().sort((a,b)=>b.createdAt-a.createdAt);
  const hero = posts.find(p => p.category === activeCategory) || posts[0];
  if (hero) {
    document.getElementById('heroTitle').textContent = hero.title;
    document.getElementById('heroSummary').textContent = hero.summary || hero.body.slice(0,180);
    document.querySelector('#heroImage img').src = hero.image || placeholderImage();
  } else {
    document.getElementById('heroTitle').textContent = 'Welcome to AMAKURU — your news hub';
    document.getElementById('heroSummary').textContent = 'This is a demo news layout. Click categories above to filter news.';
    document.querySelector('#heroImage img').src = placeholderImage();
  }
}

function renderCards() {
  const all = readPosts().sort((a,b)=>b.createdAt-a.createdAt);
  const filtered = all.filter(p => activeCategory === 'ahabanza' ? true : p.category === activeCategory);
  const container = document.getElementById('cardsContainer');
  container.innerHTML = '';
  if (filtered.length === 0) {
    document.getElementById('emptyPlaceholder').style.display = 'block';
  } else {
    document.getElementById('emptyPlaceholder').style.display = 'none';
  }
  filtered.forEach(p => {
    const el = document.createElement('article');
    el.className = 'card';
    el.innerHTML = `
      <img src="${p.image || placeholderImage()}" alt="">
      <div class="card-body">
        <div class="meta"><span class="tag">${capitalize(p.category)}</span> • <span class="muted">${timeAgo(p.createdAt)}</span></div>
        <h3>${escapeHtml(p.title)}</h3>
        <p>${escapeHtml(p.summary || p.body.slice(0,120))}</p>
        <div class="card-controls">
          <button class="icon-btn" onclick="openView('${p.id}')">View</button>
        </div>
      </div>
    `;
    container.appendChild(el);
  });

  document.getElementById('categoryCount').textContent = filtered.length + ' Inkuru';
}

function renderRecent() {
  const all = readPosts().sort((a,b)=>b.createdAt-a.createdAt).slice(0,5);
  const recent = document.getElementById('recentList');
  recent.innerHTML = '';
  if (all.length === 0) {
    recent.innerHTML = '<div class="muted">No recent posts</div>';
  } else {
    all.forEach(p => {
      const div = document.createElement('div');
      div.className = 'small-item';
      div.innerHTML = `<img src="${p.image || placeholderImage()}" alt="">
                       <div style="flex:1">
                         <div style="font-weight:700">${truncate(p.title,60)}</div>
                         <div class="muted">${timeAgo(p.createdAt)}</div>
                       </div>`;
      div.onclick = ()=>{ openView(p.id); };
      recent.appendChild(div);
    });
  }
}

function renderTopSports() {
  const sports = readPosts().filter(p=>p.category==='imikino').sort((a,b)=>b.createdAt-a.createdAt).slice(0,4);
  const node = document.getElementById('topSports');
  node.innerHTML = '';
  if (sports.length === 0) {
    node.innerHTML = '<div class="muted">No sports posts</div>';
  } else {
    sports.forEach(p => {
      const item = document.createElement('div');
      item.className = 'small-item';
      item.innerHTML = `<img src="${p.image || placeholderImage()}" alt=""><div><div style="font-weight:700">${truncate(p.title,50)}</div><div class="muted">${timeAgo(p.createdAt)}</div></div>`;
      node.appendChild(item);
    });
  }
}

/* View post modal (browser alert simplified) */
function openView(id) {
  const posts = readPosts();
  const p = posts.find(x=>x.id===id);
  if (!p) return;
  const w = window.open("", "_blank", "noopener");
  w.document.write(`<title>${escapeHtml(p.title)}</title>`);
  w.document.write(`<style>body{font-family:Inter,Arial;padding:20px;max-width:900px;margin:auto} img{max-width:100%;height:auto;border-radius:8px} h1{color:#d40000} .muted{color:#666}</style>`);
  w.document.write(`<h1>${escapeHtml(p.title)}</h1><div class="muted">Category: ${capitalize(p.category)} • ${new Date(p.createdAt).toLocaleString()}</div><img src="${p.image || placeholderImage()}" alt=""><p style="margin-top:12px">${escapeHtml(p.summary)}</p><div>${escapeHtml(p.body).replace(/\n/g,'<br>')}</div>`);
  w.document.close();
}

function placeholderImage() {
  return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><rect width='100%' height='100%' fill='%23e6e9ef'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%23999' font-size='28'>AMAKURU — image</text></svg>`);
}

function truncate(s,n){ return s && s.length>n ? s.slice(0,n-1)+'…' : (s||''); }
function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]); }

/* category navigation */
document.getElementById('nav-ahabanza').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('ahabanza'); });
document.getElementById('nav-amakuru').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('amakuru'); });
document.getElementById('nav-politiki').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('politiki'); });
document.getElementById('nav-ubukungu').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('ubukungu'); });
document.getElementById('nav-ubuzima').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('ubuzima'); });
document.getElementById('nav-imikino').addEventListener('click', e=>{ e.preventDefault(); setActiveCategory('imikino'); });

/* search */
function doSearch() {
  const q = document.getElementById('searchInput').value.trim().toLowerCase();
  if (!q) { alert('Type a search term'); return; }
  const posts = readPosts();
  const results = posts.filter(p => (p.title + ' ' + p.summary + ' ' + p.body).toLowerCase().includes(q));
  if (results.length === 0) { alert('No results found'); return; }
  document.getElementById('activeCategoryLabel').textContent = 'Search results';
  document.getElementById('categoryCount').textContent = results.length + ' Inkuru';
  const container = document.getElementById('cardsContainer');
  container.innerHTML = '';
  results.forEach(p => {
    const el = document.createElement('article');
    el.className = 'card';
    el.innerHTML = `
      <img src="${p.image || placeholderImage()}" alt="">
      <div class="card-body">
        <div class="meta"><span class="tag">${capitalize(p.category)}</span> • <span class="muted">${timeAgo(p.createdAt)}</span></div>
        <h3>${escapeHtml(p.title)}</h3>
        <p>${escapeHtml(p.summary || p.body.slice(0,120))}</p>
        <div class="card-controls">
          <button class="icon-btn" onclick="openView('${p.id}')">View</button>
        </div>
      </div>
    `;
    container.appendChild(el);
  });
}

/* initial demo seed */
(function init() {
  if (readPosts().length === 0) {
    const demo = [{
      id: uid(),
      title: 'AMAKURU Demo — How to use this site',
      category: 'ahabanza',
      summary: 'Demo posts prefilled in localStorage.',
      body: 'This demo shows news content without admin controls.',
      image: placeholderImage(),
      createdAt: Date.now()
    }];
    writePosts(demo);
  }
  renderAll();
})();

/* language placeholder */
function changeLang(l){
  alert('Language switching placeholder. Selected: ' + l);
}
</script>
</body>
</html>











